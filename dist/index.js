var e,t,r=require("@formatjs/intl-utils"),a=function(e,t){return n(t).format(e)},n=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric"})};exports.NumberFormat=void 0,(e=exports.NumberFormat||(exports.NumberFormat={})).language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none",exports.TimeFormat=void 0,(t=exports.TimeFormat||(exports.TimeFormat={})).language="language",t.system="system",t.am_pm="12",t.twenty_four="24";var o=function(e){if(e.time_format===exports.TimeFormat.language||e.time_format===exports.TimeFormat.system){var t=e.time_format===exports.TimeFormat.language?e.language:void 0,r=(new Date).toLocaleString(t);return r.includes("AM")||r.includes("PM")}return e.time_format===exports.TimeFormat.am_pm},s=function(e,t){return i(t).format(e)},i=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:o(e)?"numeric":"2-digit",minute:"2-digit",hour12:o(e)})},u=function(e,t){return c(t).format(e)},c=function(e){return new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hour12:o(e)})};function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function l(e){return e.substr(0,e.indexOf("."))}function h(e){var t,r=(null==e||null==(t=e.locale)?void 0:t.language)||"en";return e.translationMetadata.translations[r]&&e.translationMetadata.translations[r].isRTL||!1}function p(e){return l(e.entity_id)}var f=function(e){return!!e.attributes.unit_of_measurement||!!e.attributes.state_class},d=function(e){switch(e.number_format){case exports.NumberFormat.comma_decimal:return["en-US","en"];case exports.NumberFormat.decimal_comma:return["de","es","it"];case exports.NumberFormat.space_comma:return["fr","sv","cs"];case exports.NumberFormat.system:return;default:return e.language}},g=function(e,t){return void 0===t&&(t=2),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},b=function(e,t,r){var a=t?d(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==exports.NumberFormat.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(a,_(e,r)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,_(e,r)).format(Number(e))}return"string"==typeof e?e:g(e,null==r?void 0:r.maximumFractionDigits).toString()+("currency"===(null==r?void 0:r.style)?" "+r.currency:"")},_=function(e,t){var r=m({maximumFractionDigits:2},t);if("string"!=typeof e)return r;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var a=e.indexOf(".")>-1?e.split(".")[1].length:0;r.minimumFractionDigits=a,r.maximumFractionDigits=a}return r},v=["closed","locked","off"],y=new Set(["fan","input_boolean","light","switch","group","automation"]),w=function(e,t,r,a){a=a||{},r=null==r?{}:r;var n=new Event(t,{bubbles:void 0===a.bubbles||a.bubbles,cancelable:Boolean(a.cancelable),composed:void 0===a.composed||a.composed});return n.detail=r,e.dispatchEvent(n),n},x=new Set(["call-service","divider","section","weblink","cast","select"]),k={alert:"toggle",automation:"toggle",climate:"climate",cover:"cover",fan:"toggle",group:"group",input_boolean:"toggle",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",remote:"toggle",scene:"scene",script:"script",sensor:"sensor",timer:"timer",switch:"toggle",vacuum:"toggle",water_heater:"climate",input_datetime:"input-datetime"},D={alert:"hass:alert",automation:"hass:playlist-play",calendar:"hass:calendar",camera:"hass:video",climate:"hass:thermostat",configurator:"hass:settings",conversation:"hass:text-to-speech",device_tracker:"hass:account",fan:"hass:fan",group:"hass:google-circles-communities",history_graph:"hass:chart-line",homeassistant:"hass:home-assistant",homekit:"hass:home-automation",image_processing:"hass:image-filter-frames",input_boolean:"hass:drawing",input_datetime:"hass:calendar-clock",input_number:"hass:ray-vertex",input_select:"hass:format-list-bulleted",input_text:"hass:textbox",light:"hass:lightbulb",mailbox:"hass:mailbox",notify:"hass:comment-alert",person:"hass:account",plant:"hass:flower",proximity:"hass:apple-safari",remote:"hass:remote",scene:"hass:google-pages",script:"hass:file-document",sensor:"hass:eye",simple_alarm:"hass:bell",sun:"hass:white-balance-sunny",switch:"hass:flash",timer:"hass:timer",updater:"hass:cloud-upload",vacuum:"hass:robot-vacuum",water_heater:"hass:thermometer",weblink:"hass:open-in-new"};function T(e,t){if(e in D)return D[e];switch(e){case"alarm_control_panel":switch(t){case"armed_home":return"hass:bell-plus";case"armed_night":return"hass:bell-sleep";case"disarmed":return"hass:bell-outline";case"triggered":return"hass:bell-ring";default:return"hass:bell"}case"binary_sensor":return t&&"off"===t?"hass:radiobox-blank":"hass:checkbox-marked-circle";case"cover":return"closed"===t?"hass:window-closed":"hass:window-open";case"lock":return t&&"unlocked"===t?"hass:lock-open":"hass:lock";case"media_player":return t&&"off"!==t&&"idle"!==t?"hass:cast-connected":"hass:cast";case"zwave":switch(t){case"dead":return"hass:emoticon-dead";case"sleeping":return"hass:sleep";case"initializing":return"hass:timer-sand";default:return"hass:z-wave"}default:return console.warn("Unable to find icon for domain "+e+" ("+t+")"),"hass:bookmark"}}var F=function(e){w(window,"haptic",e)},N=function(e,t,r){void 0===r&&(r=!1),r?history.replaceState(null,"",t):history.pushState(null,"",t),w(window,"location-changed",{replace:r})},S=function(e,t,r){void 0===r&&(r=!0);var a,n=l(t),o="group"===n?"homeassistant":n;switch(n){case"lock":a=r?"unlock":"lock";break;case"cover":a=r?"open_cover":"close_cover";break;default:a=r?"turn_on":"turn_off"}return e.callService(o,a,{entity_id:t})},I=function(e,t){var r=v.includes(e.states[t].state);return S(e,t,r)},O=function(e,t,r,a){if(a||(a={action:"more-info"}),!a.confirmation||a.confirmation.exemptions&&a.confirmation.exemptions.some(function(e){return e.user===t.user.id})||(F("warning"),confirm(a.confirmation.text||"Are you sure you want to "+a.action+"?")))switch(a.action){case"more-info":(r.entity||r.camera_image)&&w(e,"hass-more-info",{entityId:r.entity?r.entity:r.camera_image});break;case"navigate":a.navigation_path&&N(0,a.navigation_path);break;case"url":a.url_path&&window.open(a.url_path);break;case"toggle":r.entity&&(I(t,r.entity),F("success"));break;case"call-service":if(!a.service)return void F("failure");var n=a.service.split(".",2);t.callService(n[0],n[1],a.service_data,a.target),F("success");break;case"fire-dom-event":w(e,"ll-custom",a)}},E={humidity:"hass:water-percent",illuminance:"hass:brightness-5",temperature:"hass:thermometer",pressure:"hass:gauge",power:"hass:flash",signal_strength:"hass:wifi"},A={binary_sensor:function(e,t){var r="off"===e;switch(null==t?void 0:t.attributes.device_class){case"battery":return r?"hass:battery":"hass:battery-outline";case"battery_charging":return r?"hass:battery":"hass:battery-charging";case"cold":return r?"hass:thermometer":"hass:snowflake";case"connectivity":return r?"hass:server-network-off":"hass:server-network";case"door":return r?"hass:door-closed":"hass:door-open";case"garage_door":return r?"hass:garage":"hass:garage-open";case"power":return r?"hass:power-plug-off":"hass:power-plug";case"gas":case"problem":case"safety":case"tamper":return r?"hass:check-circle":"hass:alert-circle";case"smoke":return r?"hass:check-circle":"hass:smoke";case"heat":return r?"hass:thermometer":"hass:fire";case"light":return r?"hass:brightness-5":"hass:brightness-7";case"lock":return r?"hass:lock":"hass:lock-open";case"moisture":return r?"hass:water-off":"hass:water";case"motion":return r?"hass:walk":"hass:run";case"occupancy":return r?"hass:home-outline":"hass:home";case"opening":return r?"hass:square":"hass:square-outline";case"plug":return r?"hass:power-plug-off":"hass:power-plug";case"presence":return r?"hass:home-outline":"hass:home";case"running":return r?"hass:stop":"hass:play";case"sound":return r?"hass:music-note-off":"hass:music-note";case"update":return r?"hass:package":"hass:package-up";case"vibration":return r?"hass:crop-portrait":"hass:vibrate";case"window":return r?"hass:window-closed":"hass:window-open";default:return r?"hass:radiobox-blank":"hass:checkbox-marked-circle"}},cover:function(e){var t="closed"!==e.state;switch(e.attributes.device_class){case"garage":return t?"hass:garage-open":"hass:garage";case"door":return t?"hass:door-open":"hass:door-closed";case"shutter":return t?"hass:window-shutter-open":"hass:window-shutter";case"blind":return t?"hass:blinds-open":"hass:blinds";case"window":return t?"hass:window-open":"hass:window-closed";default:return T("cover",e.state)}},sensor:function(e){var t=e.attributes.device_class;if(t&&t in E)return E[t];if("battery"===t){var r=Number(e.state);if(isNaN(r))return"hass:battery-unknown";var a=10*Math.round(r/10);return a>=100?"hass:battery":a<=0?"hass:battery-alert":"hass:battery-"+a}var n=e.attributes.unit_of_measurement;return"°C"===n||"°F"===n?"hass:thermometer":T("sensor")},input_datetime:function(e){return e.attributes.has_date?e.attributes.has_time?T("input_datetime"):"hass:calendar":"hass:clock"}};exports.DEFAULT_DOMAIN_ICON="hass:bookmark",exports.DEFAULT_PANEL="lovelace",exports.DEFAULT_VIEW_ENTITY_ID="group.default_view",exports.DOMAINS_HIDE_MORE_INFO=["input_number","input_select","input_text","scene","weblink"],exports.DOMAINS_MORE_INFO_NO_HISTORY=["camera","configurator","history_graph","scene"],exports.DOMAINS_TOGGLE=y,exports.DOMAINS_WITH_CARD=["climate","cover","configurator","input_select","input_number","input_text","lock","media_player","scene","script","timer","vacuum","water_heater","weblink"],exports.DOMAINS_WITH_MORE_INFO=["alarm_control_panel","automation","camera","climate","configurator","cover","fan","group","history_graph","input_datetime","light","lock","media_player","script","sun","updater","vacuum","water_heater","weather"],exports.STATES_OFF=v,exports.UNIT_C="°C",exports.UNIT_F="°F",exports.applyThemesOnElement=function(e,t,r,a){void 0===a&&(a=!1),e._themes||(e._themes={});var n=t.default_theme;("default"===r||r&&t.themes[r])&&(n=r);var o=m({},e._themes);if("default"!==n){var s=t.themes[n];Object.keys(s).forEach(function(t){var r="--"+t;e._themes[r]="",o[r]=s[t]})}if(e.updateStyles?e.updateStyles(o):window.ShadyCSS&&window.ShadyCSS.styleSubtree(e,o),a){var i=document.querySelector("meta[name=theme-color]");if(i){i.hasAttribute("default-content")||i.setAttribute("default-content",i.getAttribute("content"));var u=o["--primary-color"]||i.getAttribute("default-content");i.setAttribute("content",u)}}},exports.computeCardSize=function(e){return"function"==typeof e.getCardSize?e.getCardSize():4},exports.computeDomain=l,exports.computeEntity=function(e){return e.substr(e.indexOf(".")+1)},exports.computeRTL=h,exports.computeRTLDirection=function(e){return h(e)?"rtl":"ltr"},exports.computeStateDisplay=function(e,t,r,n){var o=void 0!==n?n:t.state;if("unknown"===o||"unavailable"===o)return e("state.default."+o);if(f(t)){if("monetary"===t.attributes.device_class)try{return b(o,r,{style:"currency",currency:t.attributes.unit_of_measurement})}catch(e){}return b(o,r)+(t.attributes.unit_of_measurement?" "+t.attributes.unit_of_measurement:"")}var i=p(t);if("input_datetime"===i){var c;if(void 0===n)return t.attributes.has_date&&t.attributes.has_time?(c=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),s(c,r)):t.attributes.has_date?(c=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),a(c,r)):t.attributes.has_time?((c=new Date).setHours(t.attributes.hour,t.attributes.minute),u(c,r)):t.state;try{var m=n.split(" ");if(2===m.length)return s(new Date(m.join("T")),r);if(1===m.length){if(n.includes("-"))return a(new Date(n+"T00:00"),r);if(n.includes(":")){var l=new Date;return u(new Date(l.toISOString().split("T")[0]+"T"+n),r)}}return n}catch(e){return n}}return"humidifier"===i&&"on"===o&&t.attributes.humidity?t.attributes.humidity+" %":"counter"===i||"number"===i||"input_number"===i?b(o,r):t.attributes.device_class&&e("component."+i+".state."+t.attributes.device_class+"."+o)||e("component."+i+".state._."+o)||o},exports.computeStateDomain=p,exports.createThing=function(e,t){void 0===t&&(t=!1);var r=function(e,t){return a("hui-error-card",{type:"error",error:e,config:t})},a=function(e,t){var a=window.document.createElement(e);try{a.setConfig(t)}catch(a){return console.error(e,a),r(a.message,t)}return a};if(!e||"object"!=typeof e||!t&&!e.type)return r("No type defined",e);var n=e.type;if(n&&n.startsWith("custom:"))n=n.substr("custom:".length);else if(t)if(x.has(n))n="hui-"+n+"-row";else{if(!e.entity)return r("Invalid config given.",e);var o=e.entity.split(".",1)[0];n="hui-"+(k[o]||"text")+"-entity-row"}else n="hui-"+n+"-card";if(customElements.get(n))return a(n,e);var s=r("Custom element doesn't exist: "+e.type+".",e);s.style.display="None";var i=setTimeout(function(){s.style.display=""},2e3);return customElements.whenDefined(e.type).then(function(){clearTimeout(i),w(s,"ll-rebuild",{},s)}),s},exports.debounce=function(e,t,r){var a;return void 0===r&&(r=!1),function(){var n=[].slice.call(arguments),o=this,s=function(){a=null,r||e.apply(o,n)},i=r&&!a;clearTimeout(a),a=setTimeout(s,t),i&&e.apply(o,n)}},exports.domainIcon=T,exports.evaluateFilter=function(e,t){var r=t.value||t,a=t.attribute?e.attributes[t.attribute]:e.state;switch(t.operator||"=="){case"==":return a===r;case"<=":return a<=r;case"<":return a<r;case">=":return a>=r;case">":return a>r;case"!=":return a!==r;case"regex":return a.match(r);default:return!1}},exports.fireEvent=w,exports.fixedIcons=D,exports.formatDate=a,exports.formatDateMonth=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{month:"long"})}(t).format(e)},exports.formatDateMonthYear=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric"})}(t).format(e)},exports.formatDateNumeric=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"numeric",day:"numeric"})}(t).format(e)},exports.formatDateShort=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short"})}(t).format(e)},exports.formatDateTime=s,exports.formatDateTimeNumeric=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:o(e)})}(t).format(e)},exports.formatDateTimeWithSeconds=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:o(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:o(e)})}(t).format(e)},exports.formatDateWeekday=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric"})}(t).format(e)},exports.formatDateYear=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric"})}(t).format(e)},exports.formatNumber=b,exports.formatTime=u,exports.formatTimeWeekday=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{hour:o(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:o(e)})}(t).format(e)},exports.formatTimeWithSeconds=function(e,t){return function(e){return new Intl.DateTimeFormat(e.language,{hour:o(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:o(e)})}(t).format(e)},exports.forwardHaptic=F,exports.getLovelace=function(){var e=document.querySelector("home-assistant");if(e=(e=(e=(e=(e=(e=(e=(e=e&&e.shadowRoot)&&e.querySelector("home-assistant-main"))&&e.shadowRoot)&&e.querySelector("app-drawer-layout partial-panel-resolver"))&&e.shadowRoot||e)&&e.querySelector("ha-panel-lovelace"))&&e.shadowRoot)&&e.querySelector("hui-root")){var t=e.lovelace;return t.current_view=e.___curView,t}return null},exports.handleAction=function(e,t,r,a){var n;"double_tap"===a&&r.double_tap_action?n=r.double_tap_action:"hold"===a&&r.hold_action?n=r.hold_action:"tap"===a&&r.tap_action&&(n=r.tap_action),O(e,t,r,n)},exports.handleActionConfig=O,exports.handleClick=function(e,t,r,a,n){var o;if(n&&r.double_tap_action?o=r.double_tap_action:a&&r.hold_action?o=r.hold_action:!a&&r.tap_action&&(o=r.tap_action),o||(o={action:"more-info"}),!o.confirmation||o.confirmation.exemptions&&o.confirmation.exemptions.some(function(e){return e.user===t.user.id})||confirm(o.confirmation.text||"Are you sure you want to "+o.action+"?"))switch(o.action){case"more-info":(o.entity||r.entity||r.camera_image)&&(w(e,"hass-more-info",{entityId:o.entity?o.entity:r.entity?r.entity:r.camera_image}),o.haptic&&F(o.haptic));break;case"navigate":o.navigation_path&&(N(0,o.navigation_path),o.haptic&&F(o.haptic));break;case"url":o.url_path&&window.open(o.url_path),o.haptic&&F(o.haptic);break;case"toggle":r.entity&&(I(t,r.entity),o.haptic&&F(o.haptic));break;case"call-service":if(!o.service)return;var s=o.service.split(".",2),i=s[0],u=s[1],c=m({},o.service_data);"entity"===c.entity_id&&(c.entity_id=r.entity),t.callService(i,u,c,o.target),o.haptic&&F(o.haptic);break;case"fire-dom-event":w(e,"ll-custom",o),o.haptic&&F(o.haptic)}},exports.hasAction=function(e){return void 0!==e&&"none"!==e.action},exports.hasConfigOrEntityChanged=function(e,t,r){if(t.has("config")||r)return!0;if(e.config.entity){var a=t.get("hass");return!a||a.states[e.config.entity]!==e.hass.states[e.config.entity]}return!1},exports.hasDoubleClick=function(e){return void 0!==e&&"none"!==e.action},exports.isNumericState=f,exports.navigate=N,exports.numberFormatToLocale=d,exports.relativeTime=function(e,t,a,n){void 0===n&&(n=!0);var o=r.selectUnit(e,a);return n?function(e){return new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})}(t).format(o.value,o.unit):Intl.NumberFormat(t.language,{style:"unit",unit:o.unit,unitDisplay:"long"}).format(Math.abs(o.value))},exports.round=g,exports.stateIcon=function(e){if(!e)return"hass:bookmark";if(e.attributes.icon)return e.attributes.icon;var t=l(e.entity_id);return t in A?A[t](e):T(t,e.state)},exports.timerTimeRemaining=function(e){var t,r=3600*(t=e.attributes.remaining.split(":").map(Number))[0]+60*t[1]+t[2];if("active"===e.state){var a=(new Date).getTime(),n=new Date(e.last_changed).getTime();r=Math.max(r-(a-n)/1e3,0)}return r},exports.toggleEntity=I,exports.turnOnOffEntities=function(e,t,r){void 0===r&&(r=!0);var a={};t.forEach(function(t){if(v.includes(e.states[t].state)===r){var n=l(t),o=["cover","lock"].includes(n)?n:"homeassistant";o in a||(a[o]=[]),a[o].push(t)}}),Object.keys(a).forEach(function(t){var n;switch(t){case"lock":n=r?"unlock":"lock";break;case"cover":n=r?"open_cover":"close_cover";break;default:n=r?"turn_on":"turn_off"}e.callService(t,n,{entity_id:a[t]})})},exports.turnOnOffEntity=S;
//# sourceMappingURL=index.js.map
