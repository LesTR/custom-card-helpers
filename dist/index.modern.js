import{selectUnit as e}from"@formatjs/intl-utils";const t=(e,t)=>a(t).format(e),a=e=>new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric"}),r=(e,t)=>n(t).format(e),n=e=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric"}),s=(e,t)=>i(t).format(e),i=e=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"numeric",day:"numeric"}),o=(e,t)=>c(t).format(e),c=e=>new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short"}),u=(e,t)=>l(t).format(e),l=e=>new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric"}),m=(e,t)=>h(t).format(e),h=e=>new Intl.DateTimeFormat(e.language,{month:"long"}),d=(e,t)=>g(t).format(e),g=e=>new Intl.DateTimeFormat(e.language,{year:"numeric"});var p,f;!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(p||(p={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(f||(f={}));const b=e=>{if(e.time_format===f.language||e.time_format===f.system){const t=e.time_format===f.language?e.language:void 0,a=(new Date).toLocaleString(t);return a.includes("AM")||a.includes("PM")}return e.time_format===f.am_pm},_=(e,t)=>y(t).format(e),y=e=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:b(e)?"numeric":"2-digit",minute:"2-digit",hour12:b(e)}),w=(e,t)=>v(t).format(e),v=e=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:b(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:b(e)}),k=(e,t)=>x(t).format(e),x=e=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:b(e)}),D=(e,t)=>S(t).format(e),S=e=>new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hour12:b(e)}),F=(e,t)=>T(t).format(e),T=e=>new Intl.DateTimeFormat(e.language,{hour:b(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:b(e)}),I=(e,t)=>$(t).format(e),$=e=>new Intl.DateTimeFormat(e.language,{hour:b(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:b(e)}),N=(t,a,r,n=!0)=>{const s=e(t,r);return n?(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"}))(a).format(s.value,s.unit):Intl.NumberFormat(a.language,{style:"unit",unit:s.unit,unitDisplay:"long"}).format(Math.abs(s.value))};function O(e){let t=function(e){const t=e.split(":").map(Number);return 3600*t[0]+60*t[1]+t[2]}(e.attributes.remaining);if("active"===e.state){const a=(new Date).getTime(),r=new Date(e.last_changed).getTime();t=Math.max(t-(a-r)/1e3,0)}return t}function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const A=(e,t,a,r=!1)=>{e._themes||(e._themes={});let n=t.default_theme;("default"===a||a&&t.themes[a])&&(n=a);const s=q({},e._themes);if("default"!==n){const a=t.themes[n];Object.keys(a).forEach(t=>{const r="--"+t;e._themes[r]="",s[r]=a[t]})}if(e.updateStyles?e.updateStyles(s):window.ShadyCSS&&window.ShadyCSS.styleSubtree(e,s),!r)return;const i=document.querySelector("meta[name=theme-color]");if(i){i.hasAttribute("default-content")||i.setAttribute("default-content",i.getAttribute("content"));const e=s["--primary-color"]||i.getAttribute("default-content");i.setAttribute("content",e)}},C=e=>"function"==typeof e.getCardSize?e.getCardSize():4;function E(e){return e.substr(0,e.indexOf("."))}function M(e){return e.substr(e.indexOf(".")+1)}function j(e){var t;const a=(null==e||null==(t=e.locale)?void 0:t.language)||"en";return e.translationMetadata.translations[a]&&e.translationMetadata.translations[a].isRTL||!1}function R(e){return j(e)?"rtl":"ltr"}function z(e){return E(e.entity_id)}const L=e=>!!e.attributes.unit_of_measurement||!!e.attributes.state_class,P=e=>{switch(e.number_format){case p.comma_decimal:return["en-US","en"];case p.decimal_comma:return["de","es","it"];case p.space_comma:return["fr","sv","cs"];case p.system:return;default:return e.language}},U=(e,t=2)=>Math.round(e*10**t)/10**t,B=(e,t,a)=>{const r=t?P(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==p.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(r,H(e,a)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,H(e,a)).format(Number(e))}return"string"==typeof e?e:`${U(e,null==a?void 0:a.maximumFractionDigits).toString()}${"currency"===(null==a?void 0:a.style)?` ${a.currency}`:""}`},H=(e,t)=>{const a=q({maximumFractionDigits:2},t);if("string"!=typeof e)return a;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){const t=e.indexOf(".")>-1?e.split(".")[1].length:0;a.minimumFractionDigits=t,a.maximumFractionDigits=t}return a},V=(e,t,a,n)=>{const s=void 0!==n?n:t.state;if("unknown"===s||"unavailable"===s)return e(`state.default.${s}`);if(L(t)){if("monetary"===t.attributes.device_class)try{return B(s,a,{style:"currency",currency:t.attributes.unit_of_measurement})}catch(e){}return`${B(s,a)}${t.attributes.unit_of_measurement?" "+t.attributes.unit_of_measurement:""}`}const i=z(t);if("input_datetime"===i){if(void 0===n){let e;return t.attributes.has_date&&t.attributes.has_time?(e=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),_(e,a)):t.attributes.has_date?(e=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),r(e,a)):t.attributes.has_time?(e=new Date,e.setHours(t.attributes.hour,t.attributes.minute),D(e,a)):t.state}try{const e=n.split(" ");if(2===e.length)return _(new Date(e.join("T")),a);if(1===e.length){if(n.includes("-"))return r(new Date(`${n}T00:00`),a);if(n.includes(":")){const e=new Date;return D(new Date(`${e.toISOString().split("T")[0]}T${n}`),a)}}return n}catch(e){return n}}return"humidifier"===i&&"on"===s&&t.attributes.humidity?`${t.attributes.humidity} %`:"counter"===i||"number"===i||"input_number"===i?B(s,a):t.attributes.device_class&&e(`component.${i}.state.${t.attributes.device_class}.${s}`)||e(`component.${i}.state._.${s}`)||s},W="hass:bookmark",G="lovelace",J=["climate","cover","configurator","input_select","input_number","input_text","lock","media_player","scene","script","timer","vacuum","water_heater","weblink"],K=["alarm_control_panel","automation","camera","climate","configurator","cover","fan","group","history_graph","input_datetime","light","lock","media_player","script","sun","updater","vacuum","water_heater","weather"],Q=["input_number","input_select","input_text","scene","weblink"],X=["camera","configurator","history_graph","scene"],Y=["closed","locked","off"],Z=new Set(["fan","input_boolean","light","switch","group","automation"]),ee="°C",te="°F",ae="group.default_view",re=(e,t,a,r)=>{r=r||{},a=null==a?{}:a;const n=new Event(t,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});return n.detail=a,e.dispatchEvent(n),n},ne=new Set(["call-service","divider","section","weblink","cast","select"]),se={alert:"toggle",automation:"toggle",climate:"climate",cover:"cover",fan:"toggle",group:"group",input_boolean:"toggle",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",remote:"toggle",scene:"scene",script:"script",sensor:"sensor",timer:"timer",switch:"toggle",vacuum:"toggle",water_heater:"climate",input_datetime:"input-datetime"},ie=(e,t=!1)=>{const a=(e,t)=>r("hui-error-card",{type:"error",error:e,config:t}),r=(e,t)=>{const r=window.document.createElement(e);try{r.setConfig(t)}catch(r){return console.error(e,r),a(r.message,t)}return r};if(!e||"object"!=typeof e||!t&&!e.type)return a("No type defined",e);let n=e.type;if(n&&n.startsWith("custom:"))n=n.substr("custom:".length);else if(t)if(ne.has(n))n=`hui-${n}-row`;else{if(!e.entity)return a("Invalid config given.",e);const t=e.entity.split(".",1)[0];n=`hui-${se[t]||"text"}-entity-row`}else n=`hui-${n}-card`;if(customElements.get(n))return r(n,e);const s=a(`Custom element doesn't exist: ${e.type}.`,e);s.style.display="None";const i=setTimeout(()=>{s.style.display=""},2e3);return customElements.whenDefined(e.type).then(()=>{clearTimeout(i),re(s,"ll-rebuild",{},s)}),s},oe=(e,t,a=!1)=>{let r;return function(...n){const s=this,i=a&&!r;clearTimeout(r),r=setTimeout(()=>{r=null,a||e.apply(s,n)},t),i&&e.apply(s,n)}},ce={alert:"hass:alert",automation:"hass:playlist-play",calendar:"hass:calendar",camera:"hass:video",climate:"hass:thermostat",configurator:"hass:settings",conversation:"hass:text-to-speech",device_tracker:"hass:account",fan:"hass:fan",group:"hass:google-circles-communities",history_graph:"hass:chart-line",homeassistant:"hass:home-assistant",homekit:"hass:home-automation",image_processing:"hass:image-filter-frames",input_boolean:"hass:drawing",input_datetime:"hass:calendar-clock",input_number:"hass:ray-vertex",input_select:"hass:format-list-bulleted",input_text:"hass:textbox",light:"hass:lightbulb",mailbox:"hass:mailbox",notify:"hass:comment-alert",person:"hass:account",plant:"hass:flower",proximity:"hass:apple-safari",remote:"hass:remote",scene:"hass:google-pages",script:"hass:file-document",sensor:"hass:eye",simple_alarm:"hass:bell",sun:"hass:white-balance-sunny",switch:"hass:flash",timer:"hass:timer",updater:"hass:cloud-upload",vacuum:"hass:robot-vacuum",water_heater:"hass:thermometer",weblink:"hass:open-in-new"};function ue(e,t){if(e in ce)return ce[e];switch(e){case"alarm_control_panel":switch(t){case"armed_home":return"hass:bell-plus";case"armed_night":return"hass:bell-sleep";case"disarmed":return"hass:bell-outline";case"triggered":return"hass:bell-ring";default:return"hass:bell"}case"binary_sensor":return t&&"off"===t?"hass:radiobox-blank":"hass:checkbox-marked-circle";case"cover":return"closed"===t?"hass:window-closed":"hass:window-open";case"lock":return t&&"unlocked"===t?"hass:lock-open":"hass:lock";case"media_player":return t&&"off"!==t&&"idle"!==t?"hass:cast-connected":"hass:cast";case"zwave":switch(t){case"dead":return"hass:emoticon-dead";case"sleeping":return"hass:sleep";case"initializing":return"hass:timer-sand";default:return"hass:z-wave"}default:return console.warn("Unable to find icon for domain "+e+" ("+t+")"),"hass:bookmark"}}const le=(e,t)=>{const a=t.value||t,r=t.attribute?e.attributes[t.attribute]:e.state;switch(t.operator||"=="){case"==":return r===a;case"<=":return r<=a;case"<":return r<a;case">=":return r>=a;case">":return r>a;case"!=":return r!==a;case"regex":return r.match(a);default:return!1}},me=e=>{re(window,"haptic",e)},he=(e,t,a=!1)=>{a?history.replaceState(null,"",t):history.pushState(null,"",t),re(window,"location-changed",{replace:a})},de=(e,t,a=!0)=>{const r=E(t),n="group"===r?"homeassistant":r;let s;switch(r){case"lock":s=a?"unlock":"lock";break;case"cover":s=a?"open_cover":"close_cover";break;default:s=a?"turn_on":"turn_off"}return e.callService(n,s,{entity_id:t})},ge=(e,t)=>{const a=Y.includes(e.states[t].state);return de(e,t,a)},pe=(e,t,a,r)=>{if(r||(r={action:"more-info"}),!r.confirmation||r.confirmation.exemptions&&r.confirmation.exemptions.some(e=>e.user===t.user.id)||(me("warning"),confirm(r.confirmation.text||`Are you sure you want to ${r.action}?`)))switch(r.action){case"more-info":(a.entity||a.camera_image)&&re(e,"hass-more-info",{entityId:a.entity?a.entity:a.camera_image});break;case"navigate":r.navigation_path&&he(0,r.navigation_path);break;case"url":r.url_path&&window.open(r.url_path);break;case"toggle":a.entity&&(ge(t,a.entity),me("success"));break;case"call-service":{if(!r.service)return void me("failure");const[e,a]=r.service.split(".",2);t.callService(e,a,r.service_data,r.target),me("success");break}case"fire-dom-event":re(e,"ll-custom",r)}},fe=(e,t,a,r)=>{let n;"double_tap"===r&&a.double_tap_action?n=a.double_tap_action:"hold"===r&&a.hold_action?n=a.hold_action:"tap"===r&&a.tap_action&&(n=a.tap_action),pe(e,t,a,n)},be=(e,t,a,r,n)=>{let s;if(n&&a.double_tap_action?s=a.double_tap_action:r&&a.hold_action?s=a.hold_action:!r&&a.tap_action&&(s=a.tap_action),s||(s={action:"more-info"}),!s.confirmation||s.confirmation.exemptions&&s.confirmation.exemptions.some(e=>e.user===t.user.id)||confirm(s.confirmation.text||`Are you sure you want to ${s.action}?`))switch(s.action){case"more-info":(s.entity||a.entity||a.camera_image)&&(re(e,"hass-more-info",{entityId:s.entity?s.entity:a.entity?a.entity:a.camera_image}),s.haptic&&me(s.haptic));break;case"navigate":s.navigation_path&&(he(0,s.navigation_path),s.haptic&&me(s.haptic));break;case"url":s.url_path&&window.open(s.url_path),s.haptic&&me(s.haptic);break;case"toggle":a.entity&&(ge(t,a.entity),s.haptic&&me(s.haptic));break;case"call-service":{if(!s.service)return;const[e,r]=s.service.split(".",2),n=q({},s.service_data);"entity"===n.entity_id&&(n.entity_id=a.entity),t.callService(e,r,n,s.target),s.haptic&&me(s.haptic);break}case"fire-dom-event":re(e,"ll-custom",s),s.haptic&&me(s.haptic)}};function _e(e){return void 0!==e&&"none"!==e.action}function ye(e,t,a){if(t.has("config")||a)return!0;if(e.config.entity){const a=t.get("hass");return!a||a.states[e.config.entity]!==e.hass.states[e.config.entity]}return!1}function we(e){return void 0!==e&&"none"!==e.action}const ve=(e,t,a=!0)=>{const r={};t.forEach(t=>{if(Y.includes(e.states[t].state)===a){const e=E(t),a=["cover","lock"].includes(e)?e:"homeassistant";a in r||(r[a]=[]),r[a].push(t)}}),Object.keys(r).forEach(t=>{let n;switch(t){case"lock":n=a?"unlock":"lock";break;case"cover":n=a?"open_cover":"close_cover";break;default:n=a?"turn_on":"turn_off"}e.callService(t,n,{entity_id:r[t]})})},ke=()=>{let e=document.querySelector("home-assistant");if(e=e&&e.shadowRoot,e=e&&e.querySelector("home-assistant-main"),e=e&&e.shadowRoot,e=e&&e.querySelector("app-drawer-layout partial-panel-resolver"),e=e&&e.shadowRoot||e,e=e&&e.querySelector("ha-panel-lovelace"),e=e&&e.shadowRoot,e=e&&e.querySelector("hui-root"),e){const t=e.lovelace;return t.current_view=e.___curView,t}return null},xe={humidity:"hass:water-percent",illuminance:"hass:brightness-5",temperature:"hass:thermometer",pressure:"hass:gauge",power:"hass:flash",signal_strength:"hass:wifi"},De={binary_sensor:(e,t)=>{const a="off"===e;switch(null==t?void 0:t.attributes.device_class){case"battery":return a?"hass:battery":"hass:battery-outline";case"battery_charging":return a?"hass:battery":"hass:battery-charging";case"cold":return a?"hass:thermometer":"hass:snowflake";case"connectivity":return a?"hass:server-network-off":"hass:server-network";case"door":return a?"hass:door-closed":"hass:door-open";case"garage_door":return a?"hass:garage":"hass:garage-open";case"power":return a?"hass:power-plug-off":"hass:power-plug";case"gas":case"problem":case"safety":case"tamper":return a?"hass:check-circle":"hass:alert-circle";case"smoke":return a?"hass:check-circle":"hass:smoke";case"heat":return a?"hass:thermometer":"hass:fire";case"light":return a?"hass:brightness-5":"hass:brightness-7";case"lock":return a?"hass:lock":"hass:lock-open";case"moisture":return a?"hass:water-off":"hass:water";case"motion":return a?"hass:walk":"hass:run";case"occupancy":return a?"hass:home-outline":"hass:home";case"opening":return a?"hass:square":"hass:square-outline";case"plug":return a?"hass:power-plug-off":"hass:power-plug";case"presence":return a?"hass:home-outline":"hass:home";case"running":return a?"hass:stop":"hass:play";case"sound":return a?"hass:music-note-off":"hass:music-note";case"update":return a?"hass:package":"hass:package-up";case"vibration":return a?"hass:crop-portrait":"hass:vibrate";case"window":return a?"hass:window-closed":"hass:window-open";default:return a?"hass:radiobox-blank":"hass:checkbox-marked-circle"}},cover:e=>{const t="closed"!==e.state;switch(e.attributes.device_class){case"garage":return t?"hass:garage-open":"hass:garage";case"door":return t?"hass:door-open":"hass:door-closed";case"shutter":return t?"hass:window-shutter-open":"hass:window-shutter";case"blind":return t?"hass:blinds-open":"hass:blinds";case"window":return t?"hass:window-open":"hass:window-closed";default:return ue("cover",e.state)}},sensor:e=>{const t=e.attributes.device_class;if(t&&t in xe)return xe[t];if("battery"===t){const t=Number(e.state);if(isNaN(t))return"hass:battery-unknown";const a=10*Math.round(t/10);return a>=100?"hass:battery":a<=0?"hass:battery-alert":`hass:battery-${a}`}const a=e.attributes.unit_of_measurement;return"°C"===a||"°F"===a?"hass:thermometer":ue("sensor")},input_datetime:e=>e.attributes.has_date?e.attributes.has_time?ue("input_datetime"):"hass:calendar":"hass:clock"},Se=e=>{if(!e)return"hass:bookmark";if(e.attributes.icon)return e.attributes.icon;const t=E(e.entity_id);return t in De?De[t](e):ue(t,e.state)};export{W as DEFAULT_DOMAIN_ICON,G as DEFAULT_PANEL,ae as DEFAULT_VIEW_ENTITY_ID,Q as DOMAINS_HIDE_MORE_INFO,X as DOMAINS_MORE_INFO_NO_HISTORY,Z as DOMAINS_TOGGLE,J as DOMAINS_WITH_CARD,K as DOMAINS_WITH_MORE_INFO,p as NumberFormat,Y as STATES_OFF,f as TimeFormat,ee as UNIT_C,te as UNIT_F,A as applyThemesOnElement,C as computeCardSize,E as computeDomain,M as computeEntity,j as computeRTL,R as computeRTLDirection,V as computeStateDisplay,z as computeStateDomain,ie as createThing,oe as debounce,ue as domainIcon,le as evaluateFilter,re as fireEvent,ce as fixedIcons,r as formatDate,m as formatDateMonth,u as formatDateMonthYear,s as formatDateNumeric,o as formatDateShort,_ as formatDateTime,k as formatDateTimeNumeric,w as formatDateTimeWithSeconds,t as formatDateWeekday,d as formatDateYear,B as formatNumber,D as formatTime,I as formatTimeWeekday,F as formatTimeWithSeconds,me as forwardHaptic,ke as getLovelace,fe as handleAction,pe as handleActionConfig,be as handleClick,_e as hasAction,ye as hasConfigOrEntityChanged,we as hasDoubleClick,L as isNumericState,he as navigate,P as numberFormatToLocale,N as relativeTime,U as round,Se as stateIcon,O as timerTimeRemaining,ge as toggleEntity,ve as turnOnOffEntities,de as turnOnOffEntity};
//# sourceMappingURL=index.modern.js.map
